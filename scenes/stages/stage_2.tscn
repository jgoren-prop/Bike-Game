[gd_scene load_steps=22 format=3]

[ext_resource type="Script" path="res://scripts/systems/stage_base.gd" id="1_stage_base"]
[ext_resource type="Script" path="res://scripts/systems/moving_platform.gd" id="2_moving"]

[sub_resource type="BoxShape3D" id="BoxShape3D_wide"]
size = Vector3(12, 1, 35)

[sub_resource type="BoxMesh" id="BoxMesh_wide"]
size = Vector3(12, 1, 35)

[sub_resource type="BoxShape3D" id="BoxShape3D_narrow"]
size = Vector3(6, 1, 20)

[sub_resource type="BoxMesh" id="BoxMesh_narrow"]
size = Vector3(6, 1, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_moving"]
size = Vector3(8, 1, 12)

[sub_resource type="BoxMesh" id="BoxMesh_moving"]
size = Vector3(8, 1, 12)

[sub_resource type="BoxShape3D" id="BoxShape3D_small"]
size = Vector3(5, 1, 8)

[sub_resource type="BoxMesh" id="BoxMesh_small"]
size = Vector3(5, 1, 8)

[sub_resource type="BoxShape3D" id="BoxShape3D_ramp"]
size = Vector3(12, 0.5, 14)

[sub_resource type="BoxMesh" id="BoxMesh_ramp"]
size = Vector3(12, 0.5, 14)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_road"]
albedo_color = Color(0.25, 0.28, 0.32, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_moving"]
albedo_color = Color(0.3, 0.5, 0.7, 1)
emission_enabled = true
emission = Color(0.1, 0.2, 0.3, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ramp"]
albedo_color = Color(0.4, 0.55, 0.3, 1)
emission_enabled = true
emission = Color(0.1, 0.2, 0.05, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_danger"]
albedo_color = Color(0.7, 0.2, 0.2, 1)
emission_enabled = true
emission = Color(0.3, 0.1, 0.1, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_edge"]
albedo_color = Color(1, 0.3, 0.3, 1)
emission_enabled = true
emission = Color(0.4, 0.1, 0.1, 1)

[sub_resource type="BoxMesh" id="BoxMesh_edge"]
size = Vector3(0.4, 0.25, 35)

[sub_resource type="BoxShape3D" id="BoxShape3D_gate"]
size = Vector3(10, 5, 1)

[sub_resource type="BoxMesh" id="BoxMesh_finish"]
size = Vector3(12, 4, 0.4)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_finish"]
albedo_color = Color(1, 1, 1, 1)
emission_enabled = true
emission = Color(0.5, 0.5, 0.5, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_fall"]
size = Vector3(600, 1, 600)

[node name="Stage2" type="Node3D"]
script = ExtResource("1_stage_base")
stage_number = 2
time_limit = 100.0

[node name="SpawnPoint" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 12)

[node name="StartGate" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3, 14)

[node name="CollisionShape3D" type="CollisionShape3D" parent="StartGate"]
shape = SubResource("BoxShape3D_gate")

[node name="Section1_Start" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 24)

[node name="Collision" type="CollisionShape3D" parent="Section1_Start"]
shape = SubResource("BoxShape3D_wide")

[node name="Mesh" type="MeshInstance3D" parent="Section1_Start"]
mesh = SubResource("BoxMesh_wide")
surface_material_override/0 = SubResource("StandardMaterial3D_road")

[node name="EdgeL" type="MeshInstance3D" parent="Section1_Start"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.8, 0.62, 0)
mesh = SubResource("BoxMesh_edge")
surface_material_override/0 = SubResource("StandardMaterial3D_edge")

[node name="EdgeR" type="MeshInstance3D" parent="Section1_Start"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.8, 0.62, 0)
mesh = SubResource("BoxMesh_edge")
surface_material_override/0 = SubResource("StandardMaterial3D_edge")

[node name="LaunchRamp" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.966, 0.259, 0, -0.259, 0.966, 0, 2, 50)

[node name="Collision" type="CollisionShape3D" parent="LaunchRamp"]
shape = SubResource("BoxShape3D_ramp")

[node name="Mesh" type="MeshInstance3D" parent="LaunchRamp"]
mesh = SubResource("BoxMesh_ramp")
surface_material_override/0 = SubResource("StandardMaterial3D_ramp")

[node name="MovingPlatform1" type="AnimatableBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 72)
script = ExtResource("2_moving")
move_distance = Vector3(10, 0, 0)
move_duration = 3.5

[node name="Collision" type="CollisionShape3D" parent="MovingPlatform1"]
shape = SubResource("BoxShape3D_moving")

[node name="Mesh" type="MeshInstance3D" parent="MovingPlatform1"]
mesh = SubResource("BoxMesh_moving")
surface_material_override/0 = SubResource("StandardMaterial3D_moving")

[node name="Section2_Landing" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 100)

[node name="Collision" type="CollisionShape3D" parent="Section2_Landing"]
shape = SubResource("BoxShape3D_narrow")

[node name="Mesh" type="MeshInstance3D" parent="Section2_Landing"]
mesh = SubResource("BoxMesh_narrow")
surface_material_override/0 = SubResource("StandardMaterial3D_road")

[node name="MovingPlatform2" type="AnimatableBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 0, 128)
script = ExtResource("2_moving")
move_distance = Vector3(-16, 0, 0)
move_duration = 2.5

[node name="Collision" type="CollisionShape3D" parent="MovingPlatform2"]
shape = SubResource("BoxShape3D_moving")

[node name="Mesh" type="MeshInstance3D" parent="MovingPlatform2"]
mesh = SubResource("BoxMesh_moving")
surface_material_override/0 = SubResource("StandardMaterial3D_moving")

[node name="MovingPlatform3" type="AnimatableBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6, 0, 155)
script = ExtResource("2_moving")
move_distance = Vector3(12, 0, 0)
move_duration = 2.0

[node name="Collision" type="CollisionShape3D" parent="MovingPlatform3"]
shape = SubResource("BoxShape3D_small")

[node name="Mesh" type="MeshInstance3D" parent="MovingPlatform3"]
mesh = SubResource("BoxMesh_small")
surface_material_override/0 = SubResource("StandardMaterial3D_moving")

[node name="MovingPlatform4" type="AnimatableBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 0, 175)
script = ExtResource("2_moving")
move_distance = Vector3(-12, 0, 0)
move_duration = 2.0
pause_duration = 0.3

[node name="Collision" type="CollisionShape3D" parent="MovingPlatform4"]
shape = SubResource("BoxShape3D_small")

[node name="Mesh" type="MeshInstance3D" parent="MovingPlatform4"]
mesh = SubResource("BoxMesh_small")
surface_material_override/0 = SubResource("StandardMaterial3D_moving")

[node name="Section3_Recovery" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 200)

[node name="Collision" type="CollisionShape3D" parent="Section3_Recovery"]
shape = SubResource("BoxShape3D_narrow")

[node name="Mesh" type="MeshInstance3D" parent="Section3_Recovery"]
mesh = SubResource("BoxMesh_narrow")
surface_material_override/0 = SubResource("StandardMaterial3D_road")

[node name="MovingPlatform5_Vertical" type="AnimatableBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2, 230)
script = ExtResource("2_moving")
move_distance = Vector3(0, 6, 0)
move_duration = 2.5

[node name="Collision" type="CollisionShape3D" parent="MovingPlatform5_Vertical"]
shape = SubResource("BoxShape3D_moving")

[node name="Mesh" type="MeshInstance3D" parent="MovingPlatform5_Vertical"]
mesh = SubResource("BoxMesh_moving")
surface_material_override/0 = SubResource("StandardMaterial3D_moving")

[node name="Section4_High" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4, 260)

[node name="Collision" type="CollisionShape3D" parent="Section4_High"]
shape = SubResource("BoxShape3D_wide")

[node name="Mesh" type="MeshInstance3D" parent="Section4_High"]
mesh = SubResource("BoxMesh_wide")
surface_material_override/0 = SubResource("StandardMaterial3D_road")

[node name="EdgeL" type="MeshInstance3D" parent="Section4_High"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.8, 0.62, 0)
mesh = SubResource("BoxMesh_edge")
surface_material_override/0 = SubResource("StandardMaterial3D_edge")

[node name="EdgeR" type="MeshInstance3D" parent="Section4_High"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.8, 0.62, 0)
mesh = SubResource("BoxMesh_edge")
surface_material_override/0 = SubResource("StandardMaterial3D_edge")

[node name="Section5_Final" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4, 305)

[node name="Collision" type="CollisionShape3D" parent="Section5_Final"]
shape = SubResource("BoxShape3D_wide")

[node name="Mesh" type="MeshInstance3D" parent="Section5_Final"]
mesh = SubResource("BoxMesh_wide")
surface_material_override/0 = SubResource("StandardMaterial3D_road")

[node name="FinishGate" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 7, 320)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FinishGate"]
shape = SubResource("BoxShape3D_gate")

[node name="FinishVisual" type="MeshInstance3D" parent="FinishGate"]
mesh = SubResource("BoxMesh_finish")
surface_material_override/0 = SubResource("StandardMaterial3D_finish")

[node name="FallPlane" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -40, 160)

[node name="CollisionShape3D" type="CollisionShape3D" parent="FallPlane"]
shape = SubResource("BoxShape3D_fall")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866, -0.354, 0.354, 0, 0.707, 0.707, -0.5, -0.612, 0.612, 0, 40, 0)
light_energy = 1.2
shadow_enabled = true
